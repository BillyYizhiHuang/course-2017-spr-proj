# BU CS591L1 Spring 2017 Project 1

**Team Members:**
+ Yizhi Huang
+ Yue Zhou

##Narrative
In this project, we've considered the relationship between the avg income and the number of some kind of public buildings (Hospital, School, HealthStore and Public Garden). The analyze is based on the zipcode. We want to see if the total number of the public buildings is proportional to the average earnings.

##Datasets
The six datasets we used:
<ol>
<li>'seasonalSwimPools':'https://data.cityofboston.gov/resource/xw3e-c7pz.json'</li>
<li>'communityGardens':'https://data.cityofboston.gov/resource/rdqf-ter7.json'</li>
<li>'openSpaceCambridge':'https://data.cambridgema.gov/api/views/5ctr-ccas/rows.json?accessType=DOWNLOAD'</li>
<li>'waterplayCambridge':'https://data.cambridgema.gov/api/views/hv2t-vv6d/rows.json?accessType=DOWNLOAD'</li>
<li>'openSpaceBoston':'http://bostonopendata-boston.opendata.arcgis.com/datasets/2868d370c55d4d458d4ae2224ef8cddd_7.geojson'</li>
<li>'commCenterPools':'http://bostonopendata-boston.opendata.arcgis.com/datasets/5575f763dbb64effa36acd67085ef3a8_0.geojson'</li>
</ol>

##Porcess
Firstly we can obtain the number of average earnings in each zipcode area by using MapReduce to project and reduce to get the total earnings and counts in each zipcode, then we can obtain the average earning by (total earning divides counts) for each zipcode area.

Secondly we can obtain number of hospital, number of garden, number of store and number of school group by the zipcode by applying the simple MapReduce Function.

Combining all datasets generated by the second step, we obtained a num of these building grouped by the zipcodes.

Lastly, we merge the previous dataset with the average earnings dataset to obtain a dataset that contains the number of these buildings and average earning using zipcode as unit.

##Instruction
**To run the project, please follow the follow instructions:**
###Authentication
The `auth.json` file contains the credentials with the following format
```
{
  "db_username": "alice_bob",
  "db_password": "alice_bob"
}
```
If you want to connect to the db needs the authentication, there is a `helpers.py` script that is imported in every activity scripts.
In every script, we use the functions in `helpers.py` to connect to the authenticated database. The following code in every activity script is to connect to the database by reading the `user_name` and `pass_word` in your own `auth.json`:
```
repo = openDb(getAuth("db_username"), getAuth("db_password"))
```
Just need to store your own `db_username` and `db_password` in the `auth.json`

###Run the program:
Please execute the `execute.py` to run the whole program:
```
python3 execute.py
```